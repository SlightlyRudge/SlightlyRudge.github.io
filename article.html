async function loadArticle() {
    const params = new URLSearchParams(window.location.search);
    const file = params.get("file");
    if (!file) {
        document.getElementById("article-title").innerText = "未找到文章";
        document.getElementById("content").innerHTML = "<p style='color: red;'>文章参数缺失</p>";
        return;
    }

    try {
        // 确保路径正确
        const filePath = `https://slightlyrudge.github.io/articles/${file}`;
        console.log("加载文章路径:", filePath);

        const response = await fetch(filePath);
        if (!response.ok) throw new Error(`无法加载: ${response.status}`);

        const text = await response.text();
        document.getElementById("article-title").innerText = file.replace(".md", ""); // 设置标题
        document.getElementById("content").innerHTML = marked.parse(text); // 解析 Markdown
    } catch (error) {
        document.getElementById("content").innerHTML = "<p style='color: red;'>文章加载失败</p>";
        console.error("文章加载错误:", error);
    }
}

loadArticle();
